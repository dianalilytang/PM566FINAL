<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Diana Tang">

<title>PM566FINALWEBSITE - Download the report</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">PM566FINALWEBSITE</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">Data Source</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./REPORT.pdf" rel="" target="">
 <span class="menu-text">Download the report</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a></li>
  <li><a href="#statistical-summary-tables" id="toc-statistical-summary-tables" class="nav-link" data-scroll-target="#statistical-summary-tables">Statistical Summary Tables</a>
  <ul class="collapse">
  <li><a href="#table-1.-2022---2023-weekly-rsv-hospitalization-rate-summaries" id="toc-table-1.-2022---2023-weekly-rsv-hospitalization-rate-summaries" class="nav-link" data-scroll-target="#table-1.-2022---2023-weekly-rsv-hospitalization-rate-summaries">Table 1. 2022 - 2023 Weekly RSV Hospitalization Rate Summaries</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Untitled.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Download the report</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Diana Tang </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>From 2022-2023 the pediatric population was hit with a surge in respiratory syncytial virus (RSV) like never before. While previously believed to be a common virus among babies, this past winter RSV infected an increasingly large number of young children in the 0-4 age group. Children’s hospitals were now overflowing with a particularly harsh respiratory season of RSV. COVID-19, Influenza, and Human Metapneumovirus were among the many respiratory illnesses that led to a lack of beds in children’s hospitals. While children’s hospitals went surprisingly empty during most of the pandemic from COVID-19, the winter of 2022-2023 escalated to a public health disaster with shortages of oxygen and beds for children while hospitals continued to fight the surges of COVID-19 in the adult population.</p>
<p><strong>To examine this finding closer the proposed questions aim to shed light on the data.</strong></p>
<ol type="1">
<li><p>Did seasonality and patterns change in how RSV emerged in the 2022-2023 year compared to the pre-COVID-19 pandemic season of 2018-2019?</p></li>
<li><p>Were certain pediatric age groups truly more susceptible to RSV compared to FLU or COVID in the 2022-2023 year?</p></li>
<li><p>What trends are observed and what might they foretell?</p></li>
</ol>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<p>Data was acquired through the public Center for Disease and Control data sources specifically within the Public Health Surveillance Systems. Three population-based surveillance systems were used including COVID-NET, RSV-NET, and FluSurv-NET and combined to form RESP-NET. The weekly Combined data rate represented the sum of the COVID-19, FLU, and RSV weekly rates. These surveillance systems collected laboratory confirmed hospitalization cases of RSV, COVID-19, and Flu from over 250 acute-care hospitals in 14 states. The current datasets used for this project were collected and updated to December 1st, 2023.</p>
<p>Axis were standardized to allow the visualization of seasons. Respective viral seasons were recorded as weeks 40 - 52 of the initial year and then weeks 1 - 18 of the following year. For example, the 2018 - 2019 season would follow weeks 40 - 52 of 2018, and then weeks 1 - 18 of 2019. This would correlate to October of 2018 to May of 2019, roughly covering the seasons of Fall, Winter, and Spring.</p>
<p>During the exploratory data analysis portion, the initial dimensions of the dataset were confirmed with 11 columns and 30,764 rows of data, consistent with the dataset dimensions as portrayed on the data.cdc.gov website when the data was pulled. The head of the data was consistent showing the 2018-19 season data compared to the tail of the data showing the 2022-23 season. Variable types were confirmed with surveillance type and age groups being characters. Season, year, and weeks were numbers. Weekly and cumulative rates were considered numerators.</p>
<p>Of the variables portrayed, the dataset was narrowed down to looking at the surveillance type (FLU vs.&nbsp;COVID vs.&nbsp;RSV), season, year, week, age group, weekly rates, sites, and cumulative rate. To answer the main questions, data was narrowed down further to keep the 2018-19 season, 2022-23 season, and the following age groups: “Pediatric”, “0-&lt;1 year”, “1-4 year”, “5-11 years”, “12-17 years”.</p>
<p>Upon further inspection of the variables it was discovered that NAs existed for the cumulative and weekly rates of the “Combined” sources for the 18-19 season. At the time, COVID-19 rates were not under surveillance and captured for the 18-19 data, so a combined surveillance of COVID-19, FLU, and RSV did not exist for either cumulative or weekly rates. As previously mentioned, Combined data was the summation of the respective weekly or cumulative rates of COVID-19, FLU, and RSV. To amend this, Combined surveillance was removed from the dataset. From the data, average pediatric rates were compiled by combining the weekly rates of each pediatric age group to form a mean value that represented ages 0 - 17.</p>
<p>The tools used to explore the data were primarily taken from the dplyr library to filter and select from the initial data set. The dplyr library also allowed for the closer examination of the variables. The knitr, ggplot, and gridExtra libraries were used for visualization and further analysis of the data. The plotly library was used for the interactive visualizations.</p>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<section id="figure-1.-seasonality-in-2018-2019-vs.-2022-2023" class="level4">
<h4 class="anchored" data-anchor-id="figure-1.-seasonality-in-2018-2019-vs.-2022-2023"><strong>Figure 1. Seasonality in 2018-2019 vs.&nbsp;2022-2023</strong></h4>
<p><img src="images/Figure1-01.png" class="img-fluid"></p>
<p><em>Figure 1. Depiction of the 2018-2019 RSV Weekly Hospitalizations and 2022-2023 RSV Weekly Hospitalizations over the span of October, Year 1 (2018 or 2022) to May, Year 2 (2019 or 2023). This follows weeks 40-52 of Year 1 and weeks 1-8 of Year 2. Hovering over the graph will display the respective weekly RSV hospitalization rate, week, and year.</em></p>
</section>
<section id="figure-2.-rsv-flu-covid-19-2022---2023-by-age-group" class="level4">
<h4 class="anchored" data-anchor-id="figure-2.-rsv-flu-covid-19-2022---2023-by-age-group"><strong>Figure 2. RSV, FLU, COVID-19 2022 - 2023 by Age Group</strong></h4>
<p><img src="images/Figure 2a.png" class="img-fluid"></p>
<p><em>Figure 2. The above figures display the weekly hospitalization rates for the respective respiratory illness for each age group in three separate graphs.</em></p>
</section>
<section id="figure-3.-comparing-flu-rsv-and-covid-19-pediatric-averages" class="level4">
<h4 class="anchored" data-anchor-id="figure-3.-comparing-flu-rsv-and-covid-19-pediatric-averages">Figure 3. Comparing FLU, RSV, and COVID-19 Pediatric Averages</h4>
<p><em>Figure 3. All weekly hospitalization rates for each group were compiled to calculate an average “Pediatric” rate for the respective respiratory illnesses of the 2022-2023 season.</em></p>
</section>
<section id="figure-4.-age-0---1-year-hospitalization-rates-2022---2023" class="level4">
<h4 class="anchored" data-anchor-id="figure-4.-age-0---1-year-hospitalization-rates-2022---2023">Figure 4. Age 0 - &lt;1 year Hospitalization Rates 2022 - 2023</h4>
<p><em>Figure 4. Displayed above is an interactive barplot showing the weekly hospitalization rates for the respiratory illnesses in the age 0 - &lt;1 year group for the 2022 - 2023 season in chronological order. Hovering over the graph should display the date, weekly hospitalization rate, and respiratory virus.</em></p>
</section>
<section id="figure-5.-rsv-2022---2023-boxplot-visualization-age-0---1-year" class="level4">
<h4 class="anchored" data-anchor-id="figure-5.-rsv-2022---2023-boxplot-visualization-age-0---1-year">Figure 5. RSV 2022 - 2023 Boxplot Visualization Age 0 - &lt; 1 year</h4>
<p><em>Figure 5. Boxplot of the hospitalization rates of the respiratory viruses for the age 0 - &lt;1 year group of the 2022-2023 season.</em></p>
</section>
<section id="figure-6.-interactive-seasons-of-respiratory-virus-weekly-hospitalizations-rates-2018-2023-of-age-0---1-year-group" class="level4">
<h4 class="anchored" data-anchor-id="figure-6.-interactive-seasons-of-respiratory-virus-weekly-hospitalizations-rates-2018-2023-of-age-0---1-year-group">Figure 6. Interactive Seasons of Respiratory Virus Weekly Hospitalizations Rates 2018-2023 of Age 0 - &lt;1 Year Group</h4>
<p><em>Figure 6. Interactive plot showing weekly hospitalization rates for respective respiratory viruses for the age 0 - &lt;1 year group. Hovering over the data will show the weekly rate, date, and virus surveillance name.</em></p>
</section>
</section>
<section id="statistical-summary-tables" class="level2">
<h2 class="anchored" data-anchor-id="statistical-summary-tables">Statistical Summary Tables</h2>
<section id="table-1.-2022---2023-weekly-rsv-hospitalization-rate-summaries" class="level3">
<h3 class="anchored" data-anchor-id="table-1.-2022---2023-weekly-rsv-hospitalization-rate-summaries">Table 1. 2022 - 2023 Weekly RSV Hospitalization Rate Summaries</h3>
<section id="table-2.-2022---2023-covid-vs.-flu-vs.-rsv-hospitalization-rate-summaries" class="level4">
<h4 class="anchored" data-anchor-id="table-2.-2022---2023-covid-vs.-flu-vs.-rsv-hospitalization-rate-summaries">Table 2. 2022 - 2023 COVID vs.&nbsp;FLU vs.&nbsp;RSV Hospitalization Rate Summaries</h4>
</section>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>From the preliminary results we can see a clear difference between the 2018-2019 RSV hospitalization rates and 2022-2023 RSV hospitalization rates. Overall, we can see that the averages were significantly higher in 2022 and 2023 compared to 2018 to 2019. The peak weekly rate in the 22-23 season was approximately 53.85 hospitalizations per 100,000 which was roughly 3.2 times as high as the peak in the 18-19 season of 16.875 hospitalizations per 100,000. Additionally, after inspecting the 2018-2019 season closer, we can see that the peak correlated to the seasonality/cyclic pattern seen historically with RSV. The 2018-2019 peaked at week 52 of 2018, consistent with the last week of the the 2018 year, and began to downtrend after. In the 2022 - 2023 season the peak was seen at week 45 which was consistent with early-mid November of the 2022 year.</p>
<p>This showed that the rise of cases began even prior to November and potentially with the return to school in the September months. Cases may have began to exponentially rise as more students and caretakers were returning to in-person activities as mask-mandates began to relax during this time. While seasonality may now be shifted, questions continue to be proposed if children’s hospitals are equipped for another RSV surge. Of further interest would be further analysis that may look into how pandemic precautions and non-medical interventions of staying at home and masking may have contributed to the lack of RSV immunity communities have normally seen prior to the pandemic.</p>
<p>With respect to the second question proposed, the preliminary results showed that hospitalizations rates for the respiratory viruses under surveillance disproportionately affected the the 0 - &lt; 1 age group. Visually, RSV and COVID-19 hospitalizations were dominated by the 0 - &lt;1 age group. The FLU surveillance showed more broad hospitalizations among all age groups. However, once the data of COVID-19, FLU, and RSV were placed next to each other, it was clear that RSV remained the major infection amongst the hospitalizations for the 2022 - 2023. While no concrete treatment exists for RSV apart from oxygen support, the push to study and find quicker solutions to minimize RSV hospitalizations and hospitalization lengths of stay continues. As this data has shown how the COVID-19 pandemic continues to influence and change how we understand previous and current diseases processes such as RSV in the pediatric population.</p>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<p>From the data analysis shown above we can answer the three questions initially proposed.</p>
<ol type="1">
<li><p><strong>Did seasonality and patterns change in how RSV emerged in the 2022-2023 year compared to the pre-COVID-19 pandemic season of 2018-2019?</strong> From the data, seasonality truly did change with the 2022-2023 RSV season peaking in November instead of the typical December-January. Fascinatingly, the preliminary data seen for the 2023-2024 season also appear to show a peak in November.</p></li>
<li><p><strong>Were certain pediatric age groups truly more susceptible to RSV compared to FLU or COVID in the 2022-2023?</strong> Across the board, the age group of 0 - &lt;1 year were seen to have the highest amount of hospitalizations for RSV, FLU, and COVID. It is no surprise then that RSV showed how the 0-&lt;1 year age group was extremely susceptible to RSV for the 2022-2023 season.</p></li>
<li><p><strong>What trends are observed and what might they foretell?</strong> First and foremost, seasonality of RSV appears to have shifted since the 2020 COVID pandemic with earlier incidences in the summer season and peaks in mid-Fall. This is a significant shift from the previous peaks observed in December-January months. As a consequence, RSV education, vaccination, and hospitalization preparation must now adapt and shift to earlier interventions with the changes in seasonality. This in return may lessen the hospital burden previously seen in the 2022-2023 season, specifically with the vulnerable group of 0 - &lt;1 year old pediatric patients.</p></li>
</ol>
<p>The main changes since this report was last submitted as a midterm project are summarized as follows: The “Combined” variable was clarified and defined in the methods section. Weekly and cumulative rates were considered numeric values, not integers. Most x-axis were appropriately adjusted to be more consistent and reflective of the actual year values. If an x-axis was different, it was to reflect the true month-year chronological order. Additionally, some new plots were generated to be interactive and to better see the comparison of patterns.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>